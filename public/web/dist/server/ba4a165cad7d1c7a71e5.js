exports.ids=[3],exports.modules={121:function(t,e,n){var content=n(128);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var o=n(2).default;t.exports.__inject__=function(t){o("46c7f332",content,!0,t)}},127:function(t,e,n){"use strict";n.r(e);var o=n(121),r=n.n(o);for(var c in o)"default"!==c&&function(t){n.d(e,t,(function(){return o[t]}))}(c);e.default=r.a},128:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,".main[data-v-034e11f5] {\n  max-width: 1100px;\n  margin: auto;\n  padding-top: 100px;\n}\n.main .comment[data-v-034e11f5] {\n  margin-top: 30px;\n}\n.main .comment-nickname[data-v-034e11f5] {\n  width: 400px;\n}\n.main .comment .comment-board[data-v-034e11f5] {\n  margin-top: 40px;\n}\n.main .comment .comment-board-item[data-v-034e11f5] {\n  color: #444;\n  justify-content: space-between;\n  padding-bottom: 40px;\n  margin: 35px 0;\n  border-bottom: 1px solid #ccc;\n  display: flex;\n}\n.main .comment .comment-board-item .icon-user-wrapper[data-v-034e11f5] {\n  font-size: 1.3em;\n  margin-right: 20px;\n}\n.main .comment .comment-board-item .comment-text[data-v-034e11f5] {\n  line-height: 1.4;\n  flex: 1;\n}\n.main .comment .comment-board-item .comment-text .comment-detail[data-v-034e11f5] {\n  margin: 14px 0;\n}\n.main .comment .comment-board-item .comment-text .comment-footer time[data-v-034e11f5] {\n  font-size: 14px;\n  letter-spacing: 2px;\n}\n.main .comment .comment-board-item .comment-text .comment-footer .el-icon-thumb[data-v-034e11f5] {\n  cursor: pointer;\n  float: right;\n}\n.main .comment .comment-board-item .comment-text .comment-footer .is-like[data-v-034e11f5] {\n  color: blue;\n}\n.main .comment .comment-board-item .comment-text .comment-footer .thumbup-count[data-v-034e11f5] {\n  margin-left: 4px;\n  font-size: 14px;\n}\n.main .suggestion-wrapper[data-v-034e11f5] {\n  margin-top: 50px;\n}\n.floating-action-window[data-v-034e11f5] {\n  position: fixed;\n  right: 0px;\n  bottom: 100px;\n  width: 50px;\n  font-size: 22px;\n}\n.floating-action-window .icon-wrap[data-v-034e11f5] {\n  cursor: pointer;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\n  border-radius: 2px;\n  margin-bottom: -3px;\n  padding: 4px;\n}\n.floating-action-window .icon-wrap-comment[data-v-034e11f5]:hover {\n  color: blue;\n}\n",""])},134:function(t,e,n){"use strict";n.r(e);var o=n(47),r=n(5),c={createOne:(t,e)=>r.a.post(`/articles/${t}/comments`,e),fetchList:t=>r.a.get(`/articles/${t}/comments`),deleteOne:t=>r.a.delete(`/comments/${t}`),giveThumbUp:t=>r.a.post(`/comments/${t}/like`)},m={layout:"Article",name:"ArticleDetail",head(){const{title:title}=this.data;return{title:title}},async asyncData({params:t,query:e}){const{id:n}=t,{tagIdList:r}=e;try{var[c=[],data={}]=await Promise.all([o.a.fetchSuggestionList({tagIdList:r}),o.a.fetchOne(n)])}catch(t){return{suggestionList:[],data:{}}}const m=c.findIndex(t=>t.id===n);return c.splice(m,1),{suggestionList:c,data:data}},data:()=>({showSideBar:!0,commentForm:{content:"",nickname:""},commentList:[]}),computed:{diggCommentIdList(){return this.$store.state.article.diggCommentIdList},starArticleIdList(){return this.$store.state.article.starIdList},bannerStyle(){return{background:`url(${this.data.cover.path})no-repeat top/100%`,height:"300px",color:"red",fontSize:"50px",textAlign:"center",lineHeight:3}}},created(){c.fetchList(this.$route.params.id).then(t=>{this.commentList=t}).catch(t=>{alert(t.message)})},mounted(){this.recordPv()},methods:{handleMouseLeave(t){this.starArticleIdList.includes(this.data.id)||t.target.querySelector(".el-icon-star-on").classList.replace("el-icon-star-on","el-icon-star-off")},handleMouseEnter(t){if(this.starArticleIdList.includes(this.data.id))return;t.target.querySelector(".el-icon-star-off").classList.replace("el-icon-star-off","el-icon-star-on")},handleStarArticle(t,e){this.starArticleIdList.includes(t)||o.a.starOne(t).then(()=>{this.$message.success("感谢您的小星星"),e.starCount++,this.$store.commit("article/addStarId",t)}).catch(t=>this.$message.error(t.message))},handleThumbUp(t,e){this.diggCommentIdList.includes(t)||c.giveThumbUp(t).then(()=>{e.thumbupCount++,e.isLike=!0,this.$store.commit("article/addCommentId",t)}).catch(t=>{this.$message.error(t.message)})},recordPv(){return o.a.incrementPv(this.$route.params.id).catch(t=>{this.$message.error(t.message)})},handleSave(){const{content:content,nickname:t}=this.commentForm;if(!content)return void this.$message.error("请输入评论内容!");if(!t)return void this.$message.error("请输入您的邮箱!");const{id:e}=this.$route.params,n={content:content,nickname:t};c.createOne(e,n).then(t=>{this.commentList.unshift(t),this.commentForm.content="",this.commentForm.nickname=""}).catch(t=>this.$message.error(t.message))}}},d=n(3);var component=Object(d.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[t._ssrNode((t.data.cover.path?'<div class="banner"'+t._ssrStyle(null,t.bannerStyle,null)+" data-v-034e11f5>"+t._ssrEscape(t._s(t.data.tagList.map((function(t){return t.name})).join(" ")))+"</div>":"\x3c!----\x3e")+" "),t._ssrNode('<div class="main" data-v-034e11f5>',"</div>",[t._ssrNode('<section class="content-wrapper" data-v-034e11f5><div class="content" data-v-034e11f5><h1 data-v-034e11f5>'+t._ssrEscape(t._s(t.data.title))+"</h1> <div data-v-034e11f5>"+t._s(t.data.content.html)+"</div></div></section> "),t._ssrNode('<section class="suggestion-wrapper" data-v-034e11f5>',"</section>",[n("el-divider",{attrs:{"content-position":"left"}},[t._v("相关推荐")]),t._ssrNode(" "),n("side-bar",{attrs:{dataList:t.suggestionList}})],2),t._ssrNode(" "),t._ssrNode('<section class="comment" data-v-034e11f5>',"</section>",[t._ssrNode("<h4 data-v-034e11f5>评论</h4> "),n("el-form",[n("el-form-item",{staticClass:"comment-textarea"},[n("el-input",{ref:"input",attrs:{type:"textarea",cols:30,placeholder:"请输入评论内容",rows:7,autosize:{minRows:5,maxRows:5},maxlength:200},model:{value:t.commentForm.content,callback:function(e){t.$set(t.commentForm,"content",e)},expression:"commentForm.content"}})],1),t._v(" "),n("el-form-item",{staticClass:"comment-nickname"},[n("el-input",{attrs:{maxlength:10,type:"text",placeholder:"请输入您的昵称"},model:{value:t.commentForm.nickname,callback:function(e){t.$set(t.commentForm,"nickname",e)},expression:"commentForm.nickname"}},[n("el-button",{attrs:{slot:"append",type:"button"},on:{click:t.handleSave},slot:"append"},[t._v("保存")])],1)],1)],1),t._ssrNode(" "),t._ssrNode('<ul class="comment-board" data-v-034e11f5>',"</ul>",t._l(t.commentList,(function(e){return t._ssrNode('<li class="comment-board-item" data-v-034e11f5>',"</li>",[t._ssrNode('<div class="icon-user-wrapper" data-v-034e11f5>',"</div>",[n("el-avatar",{attrs:{icon:"el-icon-user-solid",size:"medium"}})],1),t._ssrNode(" "),t._ssrNode('<div class="comment-text" data-v-034e11f5>',"</div>",[n("el-link",{staticClass:"nickname",attrs:{type:"primary",underline:!1}},[t._v(t._s(e.nickname))]),t._ssrNode(' <div class="comment-detail" data-v-034e11f5>'+t._ssrEscape(t._s(e.content))+'</div> <div class="comment-footer" data-v-034e11f5><time data-v-034e11f5>'+t._ssrEscape(t._s(new Date(e.createdAt).toLocaleString()))+"</time> <i"+t._ssrClass("el-icon-thumb el-icon",{"is-like":e.thumbupCount>0})+' data-v-034e11f5><span class="thumbup-count" data-v-034e11f5>'+t._ssrEscape(t._s(e.thumbupCount>0?e.thumbupCount:"赞"))+"</span></i></div>")],2)],2)})),0)],2)],2),t._ssrNode(" "),t._ssrNode('<div class="floating-action-window" data-v-034e11f5>',"</div>",[n("el-badge",{attrs:{hidden:0===t.data.starCount,type:"info",value:t.data.starCount}},[n("div",{staticClass:"icon-wrap",on:{mouseenter:function(e){return t.handleMouseEnter(e)},mouseleave:function(e){return t.handleMouseLeave(e)}}},[n("i",{class:t.starArticleIdList.includes(t.data.id)?"el-icon-star-on":"el-icon-star-off",on:{click:function(e){return t.handleStarArticle(t.data.id,t.data)}}})]),t._v(" "),n("el-badge",{attrs:{value:t.commentList.length,type:"info",hidden:0===t.commentList.length}},[n("div",{staticClass:"icon-wrap icon-wrap-comment"},[n("i",{staticClass:"el-icon-s-comment",on:{click:function(e){return t.$refs.input.focus()}}})])])],1)],1)],2)}),[],!1,(function(t){var e=n(127);e.__inject__&&e.__inject__(t)}),"034e11f5","eb35e272");e.default=component.exports}};
//# sourceMappingURL=ba4a165cad7d1c7a71e5.js.map