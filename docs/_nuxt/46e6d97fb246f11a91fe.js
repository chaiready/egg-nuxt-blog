(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{457:function(t,n,e){var content=e(466);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(3).default)("2159b16d",content,!0,{sourceMap:!1})},465:function(t,n,e){"use strict";var o=e(457);e.n(o).a},466:function(t,n,e){(n=e(2)(!1)).push([t.i,".nowrap-line[data-v-5bffe320] {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.main[data-v-5bffe320] {\n  max-width: 1100px;\n  margin: auto;\n  padding-top: 40px;\n}\n.banner[data-v-5bffe320] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 30px;\n  color: white;\n  position: relative;\n}\n.banner[data-v-5bffe320]:before {\n  content: '';\n  background: rgba(0, 0, 0, 0.1);\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.banner .el-tag[data-v-5bffe320] {\n  margin-right: 7px;\n  border-radius: 13px;\n  padding: 0 20px;\n}\n.banner h1[data-v-5bffe320] {\n  line-height: 1.5;\n  text-align: justify;\n  -webkit-box-orient: vertical !important;\n  overflow: hidden !important;\n  text-overflow: ellipsis !important;\n  -webkit-line-clamp: 1 !important;\n  display: -webkit-box !important;\n}\n.content-wrapper h1[data-v-5bffe320] {\n  text-align: center;\n}\n.comment[data-v-5bffe320] {\n  margin-top: 30px;\n}\n.comment-nickname[data-v-5bffe320] {\n  width: 400px;\n}\n.comment .comment-board[data-v-5bffe320] {\n  margin-top: 40px;\n}\n.comment .comment-board-item[data-v-5bffe320] {\n  color: #444;\n  justify-content: space-between;\n  padding-bottom: 40px;\n  margin: 35px 0;\n  border-bottom: 1px solid #ccc;\n  display: flex;\n}\n.comment .comment-board-item .icon-user-wrapper[data-v-5bffe320] {\n  font-size: 1.3em;\n  margin-right: 20px;\n}\n.comment .comment-board-item .comment-text[data-v-5bffe320] {\n  line-height: 1.4;\n  flex: 1;\n}\n.comment .comment-board-item .comment-text .nickname[data-v-5bffe320] {\n  color: #409eff;\n}\n.comment .comment-board-item .comment-text .comment-detail[data-v-5bffe320] {\n  margin: 14px 0;\n}\n.comment .comment-board-item .comment-text .comment-footer time[data-v-5bffe320] {\n  font-size: 14px;\n  letter-spacing: 2px;\n}\n.comment .comment-board-item .comment-text .comment-footer .el-icon-thumb[data-v-5bffe320] {\n  cursor: pointer;\n  float: right;\n}\n.comment .comment-board-item .comment-text .comment-footer .is-like[data-v-5bffe320] {\n  color: blue;\n}\n.comment .comment-board-item .comment-text .comment-footer .thumbup-count[data-v-5bffe320] {\n  margin-left: 4px;\n  font-size: 14px;\n}\n.tag-box[data-v-5bffe320] {\n  margin-top: 40px;\n  margin-bottom: 30px;\n}\n.tag-box .tag-item[data-v-5bffe320] {\n  color: #409eff;\n  font-size: 14px;\n  margin: 0 4px;\n}\n.tag-box .tag-item[data-v-5bffe320]:hover {\n  padding-bottom: 3px;\n  border-bottom: 1px solid;\n  color: #66b1ff;\n}\n.floating-action-window[data-v-5bffe320] {\n  position: fixed;\n  right: 0px;\n  bottom: 100px;\n  width: 50px;\n  font-size: 22px;\n}\n.floating-action-window .icon-wrap[data-v-5bffe320] {\n  cursor: pointer;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\n  border-radius: 2px;\n  margin-bottom: -3px;\n  padding: 4px;\n}\n.floating-action-window .icon-wrap-comment[data-v-5bffe320]:hover {\n  color: blue;\n}\n",""]),t.exports=n},470:function(t,n,e){"use strict";e.r(n);e(60),e(46),e(59),e(27),e(19),e(96);var o=e(47),r=(e(22),e(6)),c=e(212),d=e(12),m=function(t,n){return d.a.post("/articles/".concat(t,"/comments"),n)},l=function(t){return d.a.patch("/comments/".concat(t,"/thumbup"))},f={layout:"article",name:"ArticleDetail",head:function(){return{title:this.data.title}},asyncData:function(t){var n=t.params,e=t.query;return Object(r.a)(regeneratorRuntime.mark((function t(){var r,d,m,l,f,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.id,d=e.tagIdList,t.prev=2,t.next=5,Promise.all([c.a.fetchSuggestionList(r,{tagIdList:d}),c.a.fetchOne(r)]);case 5:m=t.sent,l=Object(o.a)(m,2),f=l[0],data=l[1],t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(2),t.abrupt("return",{suggestionList:[],data:{}});case 14:return t.abrupt("return",{suggestionList:f,data:data});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},data:function(){return{buttonLoading:!1}},computed:{diggCommentIdList:function(){return this.$store.state.article.diggCommentIdList},starArticleIdList:function(){return this.$store.state.article.starIdList},bannerStyle:function(){return{background:"  url(".concat(this.data.cover.path,")no-repeat center/100%"),height:"340px",textAlign:"center"}}},key:function(t){return t.fullPath},mounted:function(){this.recordPv()},methods:{onReply:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$nextTick();case 2:t.$refs.replyEditor.show(),t.$refs.replyEditor.resetFields(),t.$refs.replyEditor.clearValidate(),t.$refs.replyEditor.focus("content");case 6:case"end":return n.stop()}}),n)})))()},handleMouseLeave:function(t){this.starArticleIdList.includes(this.data.id)||t.target.querySelector(".el-icon-star-on").classList.replace("el-icon-star-on","el-icon-star-off")},handleMouseEnter:function(t){this.starArticleIdList.includes(this.data.id)||t.target.querySelector(".el-icon-star-off").classList.replace("el-icon-star-off","el-icon-star-on")},handleStarArticle:function(t,n){var e=this;this.starArticleIdList.includes(t)||c.a.starOne(t).then((function(){e.$message.success("收藏成功"),n.starCount++,e.$store.commit("article/addStarId",t)})).catch((function(t){return e.$message.error(t.message)}))},handleThumbUp:function(t,n){var e=this;this.diggCommentIdList.includes(t)||l(t).then((function(){n.thumbupCount++,n.isLike=!0,e.$store.commit("article/addCommentId",t)})).catch((function(t){e.$message.error(t.message)}))},recordPv:function(){var t=this;return c.a.incrementPv(this.$route.params.id).catch((function(n){t.$message.error(n.message)}))},replyHandler:function(t){m(t).then((function(){}))},handleSave:function(t){var n=this,e=this.$route.params.id;this.buttonLoading=!0,m(e,t).then((function(t){n.data.commentList.unshift(t),n.$message.success("评论成功"),n.buttonLoading=!1,n.$refs.comment.clearField()})).catch((function(t){n.$message.error(t.message),n.buttonLoading=!1}))}}},v=(e(465),e(4)),component=Object(v.a)(f,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"article"},[t.data.cover&&t.data.cover.path?e("div",{ref:"banner",staticClass:"banner",style:t.bannerStyle},[e("div",{staticClass:"tag-box"},t._l(t.data.tagList,(function(n,o){return e("el-tag",{key:o,attrs:{size:"medium",type:"info"}},[t._v(t._s(n.name))])})),1),t._v(" "),e("h1",[t._v(t._s(t.data.title))]),t._v(" "),e("time",[t._v(t._s(new Date(t.data.createdAt).toLocaleString()))])]):t._e(),t._v(" "),e("div",{staticClass:"main"},[e("section",{staticClass:"content-wrapper"},[e("div",{staticClass:"content"},[e("h1",[t._v(t._s(t.data.title))]),t._v(" "),e("div",{domProps:{innerHTML:t._s(t.data.content&&t.data.content.html)}})])]),t._v(" "),e("div",{staticClass:"tag-box"},[e("i",{staticClass:"el-icon-collection-tag"}),t._v(" "),t._l(t.data.tagList,(function(n,o){return e("nuxt-link",{key:o,staticClass:"tag-item",attrs:{to:{name:"articles",query:{tagID:n.id}}}},[e("span",[t._v(t._s(n.name)+t._s(o+1===t.data.tagList.length?"":"、"))])])}))],2),t._v(" "),e("section",{staticClass:"suggestion-wrapper"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("相关推荐")]),t._v(" "),e("suggestion",{attrs:{dataList:t.suggestionList}})],1),t._v(" "),e("section",{staticClass:"comment"},[e("h4",[t._v("评论")]),t._v(" "),e("message-editor",{ref:"messageEditor",on:{"on-focus":function(n){return t.$refs.replyEditor.hide()},"on-submit":t.replyHandler}}),t._v(" "),e("client-only",[e("message-tree",{attrs:{"data-list":t.data.commentList},on:{"on-reply":t.onReply}},[e("message-editor",{ref:"replyEditor",attrs:{slot:"editor",type:"reply"},on:{"on-submit":t.replyHandler},slot:"editor"})],1)],1)],1)]),t._v(" "),e("div",{staticClass:"floating-action-window"},[e("el-badge",{attrs:{hidden:0===t.data.starCount,type:"info",value:t.data.starCount}},[e("div",{staticClass:"icon-wrap",on:{mouseenter:function(n){return t.handleMouseEnter(n)},mouseleave:function(n){return t.handleMouseLeave(n)}}},[e("i",{class:t.starArticleIdList.includes(t.data.id)?"el-icon-star-on":"el-icon-star-off",on:{click:function(n){return t.handleStarArticle(t.data.id,t.data)}}})]),t._v(" "),e("el-badge",{attrs:{value:t.data.commentList&&t.data.commentList.length,type:"info",hidden:t.data.commentList&&0===t.data.commentList.length}},[e("div",{staticClass:"icon-wrap icon-wrap-comment"},[e("i",{staticClass:"el-icon-s-comment",on:{click:function(n){return t.$refs.messageEditor.focus()}}})])])],1)],1)])}),[],!1,null,"5bffe320",null);n.default=component.exports}}]);